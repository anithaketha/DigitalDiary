{"ast":null,"code":"var _jsxFileName = \"/home/rgukt/Downloads/Digital_diary-main/frontend/src/screens/Login.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport FormContainer from '../components/FormContainer';\nimport { getFromLocalStorage, setToLocalStorage } from '../utils/localStorage';\nimport '../index.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (getFromLocalStorage('userInfo')) return navigate('/');\n  }, [navigate]);\n\n  const loginApi = async _ref => {\n    let {\n      email,\n      password\n    } = _ref;\n\n    try {\n      const {\n        data\n      } = await axios.post(`http://localhost:4000/api/auth/login`, {\n        email,\n        password\n      });\n      setToLocalStorage('userInfo', data);\n      return navigate('/');\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      setError(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error);\n      return setTimeout(() => {\n        setError('');\n      }, 5000);\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!email || !password) return null;\n    loginApi({\n      email,\n      password\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      id: \"login\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-5 col-md-8 col-12 mx-auto shadow-sm p-5\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger text-center mb-3\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title text-center\",\n          children: \"Login Form\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 61\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"form-label\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setEmail(e.target.value),\n            value: email,\n            type: \"email\",\n            className: \"form-control\",\n            id: \"email\",\n            \"aria-describedby\": \"emailHelp\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"form-label\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setPassword(e.target.value),\n            value: password,\n            type: \"password\",\n            className: \"form-control\",\n            id: \"password\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"register\",\n            children: \"Don't have an account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), ' ', /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            id: \"regis\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary w-100 text-light\",\n          children: \"LOGIN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"qWZtirUOP7OU9zOPm/gw+43Yuyc=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["axios","React","useEffect","useState","Link","useNavigate","FormContainer","getFromLocalStorage","setToLocalStorage","Login","email","setEmail","password","setPassword","error","setError","navigate","loginApi","data","post","response","setTimeout","handleSubmit","e","preventDefault","target","value"],"sources":["/home/rgukt/Downloads/Digital_diary-main/frontend/src/screens/Login.js"],"sourcesContent":["import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\nimport { Link, useNavigate } from 'react-router-dom'\nimport FormContainer from '../components/FormContainer'\nimport { getFromLocalStorage, setToLocalStorage } from '../utils/localStorage'\nimport '../index.scss'\nconst Login = () => {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [error, setError] = useState('')\n\n  const navigate = useNavigate()\n  useEffect(() => {\n    if (getFromLocalStorage('userInfo')) return navigate('/')\n  }, [navigate])\n\n  const loginApi = async ({ email, password }) => {\n    try {\n      const { data } = await axios.post(\n        `http://localhost:4000/api/auth/login`,\n        {\n          email,\n          password,\n        }\n      )\n      setToLocalStorage('userInfo', data)\n      return navigate('/')\n    } catch (error) {\n      setError(error?.response?.data?.error)\n      return setTimeout(() => {\n        setError('')\n      }, 5000)\n    }\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    if (!email || !password) return null\n    loginApi({ email, password })\n  }\n\n  return (\n    \n    <FormContainer >\n      <form onSubmit={(e) => handleSubmit(e)} id=\"login\">\n        <div className='col-lg-5 col-md-8 col-12 mx-auto shadow-sm p-5'>\n          {error && (\n            <div className='alert alert-danger text-center mb-3'>{error}</div>\n          )}\n          <h1 className='title text-center'>Login Form</h1> <hr />\n          <div className='mb-3'>\n            <label htmlFor='email' className='form-label'>\n              Email address\n            </label>\n            <input\n              onChange={(e) => setEmail(e.target.value)}\n              value={email}\n              type='email'\n              className='form-control'\n              id='email'\n              aria-describedby='emailHelp'\n              required\n            />\n          </div>\n          <div className='mb-3'>\n            <label htmlFor='password' className='form-label'>\n              Password\n            </label>\n            <input\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n              type='password'\n              className='form-control'\n              id='password'\n              required\n            />\n          </div>\n          <div className='mb-3'>\n            <label htmlFor='register'>Don't have an account?</label>{' '}\n            <Link to='/register' id=\"regis\">Register</Link>\n          </div>\n          <button type='submit' className='btn btn-primary w-100 text-light'>\n            LOGIN\n          </button>\n        </div>\n      </form>\n    </FormContainer>\n\n  )\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}